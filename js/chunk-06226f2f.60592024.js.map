{"version":3,"sources":["webpack:///./src/views/manage/account-management/SuperLotteryLink.vue?4ee8","webpack:///./src/views/manage/account-management/SuperLotteryLink.vue?daf9","webpack:///src/views/manage/account-management/SuperLotteryLink.vue","webpack:///./src/views/manage/account-management/SuperLotteryLink.vue?9d14","webpack:///./src/views/manage/account-management/SuperLotteryLink.vue"],"names":["name","data","postHost","postData","reciprocalSecond","loadingStatus","account","mounted","this","init","methods","$route","query","isLoginAccount","loadSuperLotteryUrl","sessionStorage","getItem","parseInt","editLevelCode","upAccount","getSuperLotteryUrl","$toastr","error","redirectSuperLottery","self","clearInterval","timer","component","_vm","_h","$createElement","_c","_self","attrs","directives","rawName","value","expression","staticStyle","staticClass","$ln","_v","_s","domProps","options","__file"],"mappings":"0GAAA,uBAA2f,G,2CCA3f,I,qKCwDA,ICxDwX,EDwDxX,CACEA,KAAM,mBACNC,KAFF,WAGI,MAAO,CACLC,SAAU,GACVC,SAAU,GACVC,iBAAkB,EAElBC,eAAe,EACfC,QAAS,KAGbC,QAZF,WAaIC,KAAKC,QAEPC,Q,sUAAS,CAAX,GACA,aACI,mBAAJ,2BAFA,CAKID,KALJ,WAQ+C,QAArCD,KAAKG,OAAOC,MAAMC,eACpBL,KAAKM,oBAAoBC,eAAeC,QAAQ,yBACxD,yCAEQR,KAAKM,oBAAkE,IAA9CG,SAAST,KAAKG,OAAOC,MAAMM,eAAuBV,KAAKG,OAAOC,MAAMO,UAAYX,KAAKG,OAAOC,MAAMN,UAG/HQ,oBAfJ,SAeA,cAEMN,KAAKF,QAAUA,EAEfE,KAAKH,eAAgB,EACrB,IACEG,KAAKY,mBAAmB,CAAhC,SACA,kBACU,GAAV,sDACA,8BACA,yBACY,GAAZ,oCAQA,iBAEA,iCAEA,kCAEc,EAAd,gCACc,EAAd,gCAEc,EAAd,8CAIU,EAAV,oBAEA,sBAGU,EAAV,oBAEA,SACQZ,KAAKa,QAAQC,MAAM,GAA3B,qCAKIC,qBA5DJ,SA4DA,KACM,GAAIrB,GAAYC,EACd,IAAR,OACA,0BACUqB,EAAKpB,iBAAmBoB,EAAKpB,iBAAmB,EAClB,IAA1BoB,EAAKpB,mBACPqB,cAAcC,GACd,IAAZ,iCAEA,S,wBEpIIC,EAAY,YACd,GHTW,WAAa,IAAIC,EAAIpB,KAASqB,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,cAAc,CAACE,MAAM,CAAC,MAAQ,GAAG,eAAe,KAAK,CAACF,EAAG,uBAAuB,CAACG,WAAW,CAAC,CAAClC,KAAK,OAAOmC,QAAQ,SAASC,OAAM,EAAQC,WAAW,YAAYN,EAAG,MAAM,CAACO,YAAY,CAAC,QAAU,SAAS,CAAEV,EAAiB,cAAEG,EAAG,KAAK,CAACQ,YAAY,QAAQ,CAACR,EAAG,sBAAsB,CAACE,MAAM,CAAC,YAAYL,EAAIY,IAAI,YAAaZ,EAAItB,SAAS,aAAc,MAAU,GAAGyB,EAAG,MAAM,CAAEH,EAAI1B,UAAY0B,EAAIzB,SAAU4B,EAAG,KAAK,CAACQ,YAAY,QAAQ,CAACR,EAAG,sBAAsB,CAACE,MAAM,CAAC,YAAYL,EAAIY,IAAI,YAAaZ,EAAItB,SAAS,aAAc,MAAU,GAAGyB,EAAG,KAAK,CAACQ,YAAY,QAAQ,CAACX,EAAIa,GAAGb,EAAIc,GAAGd,EAAIY,IAAI,+BAA+B,cAAcT,EAAG,OAAO,CAACO,YAAY,CAAC,QAAU,QAAQL,MAAM,CAAC,GAAK,mBAAmB,OAASL,EAAI1B,SAAS,KAAO,mBAAmB,OAAS,SAAS,CAAC6B,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,SAAS,KAAO,YAAYU,SAAS,CAAC,MAAQf,EAAIzB,mBAAmB,KACj7B,IGWpB,EACA,KACA,KACA,MAIFwB,EAAUiB,QAAQC,OAAS,uBACZ,aAAAlB,E","file":"js/chunk-06226f2f.60592024.js","sourcesContent":["import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SuperLotteryLink.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SuperLotteryLink.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"fluid\":\"\",\"grid-list-xl\":\"\"}},[_c('SelectSelectLanguage',{directives:[{name:\"show\",rawName:\"v-show\",value:(false),expression:\"false\"}]}),_c('div',{staticStyle:{\"padding\":\"10px\"}},[(_vm.loadingStatus)?_c('h4',{staticClass:\"mb-3\"},[_c('MaterialLoadingPage',{attrs:{\"show-text\":_vm.$ln(\"帳號 %s 授權中\", _vm.account),\"setLanguage\":false}})],1):_c('div',[(_vm.postHost && _vm.postData)?_c('h4',{staticClass:\"mb-3\"},[_c('MaterialLoadingPage',{attrs:{\"show-text\":_vm.$ln(\"帳號 %s 授權中\", _vm.account),\"setLanguage\":false}})],1):_c('h4',{staticClass:\"mb-3\"},[_vm._v(_vm._s(_vm.$ln('授權失敗，無法轉跳至 Super 彩球，請聯絡管理員'))+\"\\n      \")]),_c('form',{staticStyle:{\"display\":\"none\"},attrs:{\"id\":\"superLotteryLink\",\"action\":_vm.postHost,\"name\":\"superLotteryLink\",\"method\":\"POST\"}},[_c('input',{attrs:{\"type\":\"hidden\",\"name\":\"PostData\"},domProps:{\"value\":_vm.postData}})])])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-container\r\n    fluid\r\n    grid-list-xl>\r\n    <!-- 語系選單(需隱藏) -->\r\n    <SelectSelectLanguage v-show=\"false\"/>\r\n\r\n    <div style=\"padding: 10px;\">\r\n      <h4\r\n        v-if=\"loadingStatus\"\r\n        class=\"mb-3\">\r\n        <MaterialLoadingPage\r\n          :show-text=\"$ln(`帳號 %s 授權中`, account)\"\r\n          :setLanguage=\"false\"\r\n        />\r\n      </h4>\r\n      <div v-else>\r\n        <h4\r\n          v-if=\"postHost && postData\"\r\n          class=\"mb-3\">\r\n          <MaterialLoadingPage\r\n            :show-text=\"$ln(`帳號 %s 授權中`, account)\"\r\n            :setLanguage=\"false\"\r\n          />\r\n        </h4>\r\n        <h4\r\n          v-else\r\n          class=\"mb-3\">{{ $ln('授權失敗，無法轉跳至 Super 彩球，請聯絡管理員') }}\r\n        </h4>\r\n        <form\r\n          id=\"superLotteryLink\"\r\n          :action=\"postHost\"\r\n          style=\"display:none\"\r\n          name=\"superLotteryLink\"\r\n          method=\"POST\">\r\n          <input\r\n            :value=\"postData\"\r\n            type=\"hidden\"\r\n            name=\"PostData\">\r\n        </form>\r\n        <!-- <br>\r\n        <br>\r\n        <h5 class=\"mb-3\">\r\n          Post Host: {{ postHost }}<br>\r\n          Post Data: {{ postData }}\r\n        </h5> -->\r\n      </div>\r\n    </div>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions } from 'vuex'\r\nimport { common } from '@/utils'\r\nimport $ from 'jquery'\r\n\r\nexport default {\r\n  name: 'SuperLotteryLink',\r\n  data () {\r\n    return {\r\n      postHost: '',\r\n      postData: '',\r\n      reciprocalSecond: 3,\r\n      // 載入狀態\r\n      loadingStatus: false,\r\n      account: ''\r\n    }\r\n  },\r\n  mounted () {\r\n    this.init()\r\n  },\r\n  methods: {\r\n    ...mapActions({\r\n      getSuperLotteryUrl: 'api/getSuperLotteryUrl'\r\n    }),\r\n    // 初始\r\n    init () {\r\n      // isLoginAccount 是否送登入帳號\r\n      // 說明: \"yes\" 送登入帳號, \"no\" 要依照指定帳號送請求\r\n      if (this.$route.query.isLoginAccount === 'yes') {\r\n        this.loadSuperLotteryUrl(sessionStorage.getItem('super.manage.account'))\r\n      } else if (this.$route.query.isLoginAccount === 'no') {\r\n        // 若是會員帳號則帶上層帳號\r\n        this.loadSuperLotteryUrl(parseInt(this.$route.query.editLevelCode) === 1 ? this.$route.query.upAccount : this.$route.query.account)\r\n      }\r\n    },\r\n    loadSuperLotteryUrl (account) {\r\n      console.log(`轉跳帳號為 ${account} 的 Super 彩球登入資訊`)\r\n      this.account = account\r\n      // 載入狀態(開始)\r\n      this.loadingStatus = true\r\n      try {\r\n        this.getSuperLotteryUrl({ l_no: account })\r\n          .then(res => {\r\n            if (Object.prototype.toString.call(res) === '[object Error]' &&\r\n                res.hasOwnProperty('response') &&\r\n                res.response.status !== 200) {\r\n              if (res.response.status === 401) return\r\n              // 錯誤訊息\r\n              // if (res.response.data.hasOwnProperty('errors')) {\r\n              //   common.errorMsgHandler(res.response.data.errors)\r\n              // } else {\r\n              //   this.$toastr.error(`取得Super彩球連結錯誤`)\r\n              // }\r\n              console.error(res.response)\r\n            } else if (res.status === 200) { // success\r\n              // http 200 回應錯誤訊息\r\n              if (res.data.hasOwnProperty('errors')) {\r\n                console.error('response 200 error: ', res.data)\r\n              } else if (res.data.hasOwnProperty('result')) {\r\n                // console.log(`取得Super彩球連結成功`, res.data.result)\r\n                this.postHost = res.data.result.postHost\r\n                this.postData = res.data.result.postData\r\n                // 轉跳至 Super 彩球\r\n                this.redirectSuperLottery(this.postHost, this.postData)\r\n              }\r\n            }\r\n            // 載入狀態(開始)\r\n            this.loadingStatus = false\r\n          })\r\n          .catch(err => {\r\n            console.error(err)\r\n            // 載入狀態(開始)\r\n            this.loadingStatus = false\r\n          })\r\n      } catch (error) {\r\n        this.$toastr.error(`${this.$ln('站台資料錯誤，請聯絡管理員')}`)\r\n        console.error(error)\r\n      }\r\n    },\r\n    // 轉跳至 Super 彩球\r\n    redirectSuperLottery (postHost, postData) {\r\n      if (postHost && postData) {\r\n        let self = this\r\n        let timer = setInterval(function () {\r\n          self.reciprocalSecond = self.reciprocalSecond - 1\r\n          if (self.reciprocalSecond === 1) {\r\n            clearInterval(timer)\r\n            $('#superLotteryLink').submit()\r\n          }\r\n        }, 1000)\r\n      } else {\r\n        console.error(`無法轉跳至 Super 彩球`)\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"css\">\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SuperLotteryLink.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SuperLotteryLink.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SuperLotteryLink.vue?vue&type=template&id=64dcf1e0&\"\nimport script from \"./SuperLotteryLink.vue?vue&type=script&lang=js&\"\nexport * from \"./SuperLotteryLink.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SuperLotteryLink.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"SuperLotteryLink.vue\"\nexport default component.exports"],"sourceRoot":""}