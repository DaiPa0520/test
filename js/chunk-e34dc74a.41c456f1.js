(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-e34dc74a"],{5848:function(t,e,s){},"5bb6":function(t,e,s){"use strict";var r=s("5848");s.n(r).a},c810:function(t,e,s){"use strict";s.r(e);var r=s("ed08"),o=s("11dd"),a=s("0728"),n={name:"DailyReportResult",mixins:[s("ecb3").a],components:{LoadingPage:o["default"],ReportBills:a["default"]},data:function(){return{gameHallItems:{selected:"",options:[{text:"全部",value:"pe,bg,ry",type:"all",show:!0},{text:"體彩",value:"pe",type:"sport",show:!0},{text:"BingoStar",value:"bg",type:"bingo",show:!0},{text:"皇家",value:"ry",type:"royal",show:!0}]},searchItems:{count_date:r.a.isObject(this.$route.query.reportItems)?this.$route.query.reportItems.countDate:"",count_date_end:r.a.isObject(this.$route.query.reportItems)?this.$route.query.reportItems.countDate:"",vendor:"",click_acc:"",search_acc:r.a.isObject(this.$route.query.reportItems)?this.$route.query.reportItems.account:"",ball_type:"",game_type:"",play_type:"",bg_game:"",ry_game:""},reportUrl:"/manage/report/daily-report/"}},mounted:function(){if(this.updateDashboardInfo(),r.a.isObject(this.$route.query.reportItems))this.searchItems.ball_type=this.$route.query.reportItems.ballTypeItems.selected.join(","),this.searchItems.game_type=this.$route.query.reportItems.ballGameTypeItems.selected.join(","),this.searchItems.play_type=this.$route.query.reportItems.ballPlayTypeItems.selected.join(","),""!==this.searchItems.ball_type&&this.searchVendorItems.push("pe"),this.switchVendor(),this.searchItems.vendor=this.gameHallItems.selected,this.loadResult(undefined,"search");else if(r.a.isObject(this.$route.query.searchItems)){if(this.$route.query.hasOwnProperty("backAccount")&&this.$route.query.hasOwnProperty("backLevel")){this.getBackAccount(this.$route.query.backAccount,this.$route.query.backLevel,this.$route.query.searchTree);var t=this.$route.query.searchItems;if(1===parseInt(sessionStorage.getItem("report.search.level"))&&sessionStorage.getItem("report.search.account")){t.search_acc=sessionStorage.getItem("report.search.account");var e={};for(var s in t)"click_acc"!==s&&"search_tree"!==s&&(e[s]=t[s]);t=e}else t.click_acc=this.$route.query.backAccount,t.search_tree=this.$route.query.searchTree;this.searchItems=t,this.$route.query.searchVendorItems&&(this.searchVendorItems=this.$route.query.searchVendorItems),this.gameHallItems.selected=this.searchItems.vendor,this.switchVendor(),this.loadResult(),this.$route.query.backLevel===parseInt(sessionStorage.getItem("report.search.level"))+1?this.backInfo.backReportStatus=!1:this.backInfo.backReportStatus=!0}}else this.toBack()},methods:{loadResult:function(t,e){var s=this;this.loadingStatus=!0;var o=t!==undefined?t:this.searchItems;try{this.getTodayReport(o).then((function(t){if("[object Error]"===Object.prototype.toString.call(t)&&t.hasOwnProperty("response")&&200!==t.response.status)t.response.data.hasOwnProperty("errors")?r.a.errorMsgHandler(t.response.data.errors):s.$toastr.error(s.$ln("搜尋當日報表失敗")),s.toBack();else if(200===t.status)if(t.data.hasOwnProperty("errors"))s.toBack();else if(t.data.hasOwnProperty("result")){var a=[],n=0,c="";for(var l in t.data.result.list)n+=1,t.data.result.list[l].id=n,a.push(t.data.result.list[l]),c=parseInt(t.data.result.list[l].level);for(var i in"search"===e&&(sessionStorage.setItem("report.search.level",c),o.hasOwnProperty("search_acc")&&o.search_acc&&sessionStorage.setItem("report.search.account",o.search_acc)),s.reportList.contents=a,s.reportList.headers)s.reportList.headers[i].hasOwnProperty("type")&&"levelAccount"===s.reportList.headers[i].type&&s.mapLevelAccountItems[c]&&(s.reportList.headers[i].text=s.mapLevelAccountItems[c]);s.searchInfo.itemsOfVendor=t.data.result.itemsOfVendor,s.searchInfo.gameType=t.data.result.gameType,s.searchInfo.playType=t.data.result.playType,s.searchInfo.showTime=t.data.result.showTime,s.reportList.totals.betCount=s.countTotal(a,"ccount"),s.reportList.totals.betAmount=s.countTotal(a,"cmount"),s.reportList.totals.effectiveBet=s.countTotal(a,"bmount"),s.reportList.totals.member.g0_comm=s.countTotal(a,"g0_comm"),s.reportList.totals.member.g0_mount=s.countTotal(a,"g0_mount"),s.reportList.totals.agent.g1_comm=s.countTotal(a,"g1_comm"),s.reportList.totals.agent.g1_mount=s.countTotal(a,"g1_mount"),s.reportList.totals.agent.g1_result=s.countTotal(a,"g1_result"),s.reportList.totals.generalAgent.g2_comm=s.countTotal(a,"g2_comm"),s.reportList.totals.generalAgent.g2_mount=s.countTotal(a,"g2_mount"),s.reportList.totals.generalAgent.g2_result=s.countTotal(a,"g2_result"),s.reportList.totals.shareholder.g3_comm=s.countTotal(a,"g3_comm"),s.reportList.totals.shareholder.g3_mount=s.countTotal(a,"g3_mount"),s.reportList.totals.shareholder.g3_result=s.countTotal(a,"g3_result"),s.reportList.totals.majorShareholder.g4_comm=s.countTotal(a,"g4_comm"),s.reportList.totals.majorShareholder.g4_mount=s.countTotal(a,"g4_mount"),s.reportList.totals.majorShareholder.g4_result=s.countTotal(a,"g4_result"),s.reportList.totals.director.g5_comm=s.countTotal(a,"g5_comm"),s.reportList.totals.director.g5_mount=s.countTotal(a,"g5_mount"),s.reportList.totals.director.g5_result=s.countTotal(a,"g5_result"),s.reportList.totals.majorDirector.g6_comm=s.countTotal(a,"g6_comm"),s.reportList.totals.majorDirector.g6_mount=s.countTotal(a,"g6_mount"),s.reportList.totals.majorDirector.g6_result=s.countTotal(a,"g6_result")}else s.toBack();s.loadingStatus=!1}))["catch"]((function(t){s.loadingStatus=!1}))}catch(a){this.$toastr.error(this.$ln("站台資料錯誤，請聯絡客服"))}},updateDashboardInfo:function(){var t=JSON.parse(sessionStorage.getItem("super.manage.dashboard.info"));if(t&&t.hasOwnProperty("noOpenGame")){for(var e in t.noOpenGame)this.closeGameType(t.noOpenGame[e]);-1===t.noOpenGame.indexOf("s16")&&this.openGameType("s16"),-1===t.noOpenGame.indexOf("s18")&&this.openGameType("s18")}},openGameType:function(t){switch(t){case"s16":r.a.isObject(this.$route.query.reportItems)&&(this.searchItems.bg_game=this.$route.query.reportItems.bgTypeItems.selected.join(","),""!==this.searchItems.bg_game&&this.searchVendorItems.push("bg"));break;case"s18":r.a.isObject(this.$route.query.reportItems)&&(this.searchItems.ry_game=this.$route.query.reportItems.ryTypeItems.selected.join(","),""!==this.searchItems.ry_game&&this.searchVendorItems.push("ry"))}},closeGameType:function(t){switch(t){case"s16":for(var e in this.gameHallItems.options)"bingo"===this.gameHallItems.options[e].type&&(this.gameHallItems.options[e].show=!1);break;case"s18":for(var s in this.gameHallItems.options)"royal"===this.gameHallItems.options[s].type&&(this.gameHallItems.options[s].show=!1)}}}},c=(s("5bb6"),s("2877")),l=Object(c.a)(n,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"reportTable"},[s("v-container",{attrs:{fluid:"","grid-list-xl":""}},[t.backInfo.backReportStatus?s("CommonBtnBack",{attrs:{Title:t.mapVendorItems[t.gameHallItems.selected]?t.$ln(t.mapVendorItems[t.gameHallItems.selected])+t.$ln("當日報表"):t.$ln("當日報表"),toBack:t.backAccountReport}}):s("CommonBtnBack",{attrs:{Title:t.mapVendorItems[t.gameHallItems.selected]?t.$ln(t.mapVendorItems[t.gameHallItems.selected])+t.$ln("當日報表"):t.$ln("當日報表"),BtnTitle:"返回",toBack:t.toBack}}),s("v-layout",{staticClass:"pl-1",attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{md9:"",xs12:""}},[t._v("\n        "+t._s(t.$ln("帳務日期"))+"："),s("br"),t._v(t._s(t.searchInfo.showTime)+"\n      ")]),s("CommonCounter",{attrs:{reciprocalItems:t.reciprocalItems,updateTableList:t.updateTableList},on:{"update:reciprocalItems":function(e){t.reciprocalItems=e}}})],1),t.loadingStatus?s("div",{staticClass:"text-xs-center"},[s("LoadingPage",{attrs:{"show-text":"搜尋中"}})],1):s("div",[s("ReportSearchInfoCollapse",{attrs:{searchInfo:t.searchInfo},on:{"update:searchInfo":function(e){t.searchInfo=e}}}),s("div",{staticClass:"pl-1"},[s("ReportSearchInfoContent",{attrs:{searchInfo:t.searchInfo},on:{"update:searchInfo":function(e){t.searchInfo=e}}}),s("CommonRadio",{attrs:{TypeItems:t.gameHallItems,Title:t.$ln("館別")},on:{"update:TypeItems":function(e){t.gameHallItems=e}}}),s("CommonCheckbox",{attrs:{TypeItems:t.stratumItems,TypeSelectAll:t.stratumSelectAll,Title:t.$ln("顯示"),TitlePos:"top"},on:{"update:TypeItems":function(e){t.stratumItems=e},"update:TypeSelectAll":function(e){t.stratumSelectAll=e}}})],1),s("ReportTable",{attrs:{List:t.reportList,SelectItems:t.stratumItems,getAccountReport:t.getAccountReport,gameHallItems:t.gameHallItems,searchItems:t.searchItems,getReturnItems:t.getReturnItems,nextUrl:t.reportUrl,searchVendorItems:t.searchVendorItems,category:"cur",searchInfo:t.searchInfo},on:{"update:List":function(e){t.reportList=e},"update:SelectItems":function(e){t.stratumItems=e},"update:gameHallItems":function(e){t.gameHallItems=e},"update:searchItems":function(e){t.searchItems=e},"update:searchVendorItems":function(e){t.searchVendorItems=e}}})],1)],1)],1)}),[],!1,null,"15d04642",null);l.options.__file="Result.vue";e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-e34dc74a.41c456f1.js.map