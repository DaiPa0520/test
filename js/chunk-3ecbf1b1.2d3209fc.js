(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3ecbf1b1"],{"1fac":function(t,e,s){"use strict";var r=s("ffeb");s.n(r).a},"6b49":function(t,e,s){},7433:function(t,e,s){"use strict";s.r(e);var r=s("a2fc"),o=s("ed08"),a={name:"CopyAgent",mixins:[r.a],data:function(){return{levelName:"代理",level:2,upLevel:3}},computed:{},watch:{getGenerateGleadAccountState:function(t){this.Items.account.selected=t.result.account[0],this.Items.account.options=t.result.account},"$route.query.upAccount":function(){this.loadGenerateAccount(),this.getDefault()}},mounted:function(){var t=this;o.a.isObject(this.$route.query.item)&&this.$route.query.searchStatus?this.getDownAccount({accountLine:this.$route.query.item.l_no}).then((function(e){200===e.status&&e.data.hasOwnProperty("result")&&e.data.result.hasOwnProperty("accountLine")&&(t.searchUpAccount=e.data.result.accountLine[3],t.loadGenerateAccount(),t.getDefault())})):(this.loadGenerateAccount(),this.getDefault()),this.updateDashboardInfo()}},n=(s("c580"),s("2877")),u=Object(n.a)(a,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",[s("v-layout",{attrs:{wrap:""}},[s("v-flex",{staticClass:"mt-0 pb-2",attrs:{xs6:"",tag:"h3"}},[t._v("\n      "+t._s(t.$ln("複製代理"))+"\n    ")]),s("v-flex",{staticClass:"text-xs-right",attrs:{xs6:""}},[s("v-btn",{attrs:{small:"",color:"amber darken-3"},on:{click:function(e){t.toBack()}}},[s("v-icon",[t._v("mdi-arrow-left")]),t._v("\n        "+t._s(t.$ln("返回"))+"\n      ")],1)],1)],1),s("material-card",[s("v-form",{model:{value:t.Items.valid,callback:function(e){t.$set(t.Items,"valid",e)},expression:"Items.valid"}},[s("v-layout",{attrs:{wrap:"",row:""}},[s("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[s("v-select",{attrs:{items:t.Items.account.options,"no-data-text":t.$ln("無可用帳號"),label:t.$ln(t.levelName+"帳號"),required:""},model:{value:t.Items.account.selected,callback:function(e){t.$set(t.Items.account,"selected",e)},expression:"Items.account.selected"}})],1),s("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[s("v-text-field",{attrs:{rules:t.Items.nameItems.nameRules,label:t.$ln(t.levelName+"名稱")},model:{value:t.Items.nameItems.name,callback:function(e){t.$set(t.Items.nameItems,"name",e)},expression:"Items.nameItems.name"}})],1),s("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[s("v-text-field",{attrs:{rules:t.Items.passwordItems.passwordRules,"append-icon":t.Items.passwordItems.passwordIsVisible?"mdi-eye":"mdi-eye-off",type:t.Items.passwordItems.passwordIsVisible?"text":"password",label:t.$ln("密碼"),hint:t.$ln("長度需為 4 位以上，並且是字母和數字的組合"),required:""},on:{"click:append":function(e){t.Items.passwordItems.passwordIsVisible=!t.Items.passwordItems.passwordIsVisible}},model:{value:t.Items.passwordItems.password,callback:function(e){t.$set(t.Items.passwordItems,"password",e)},expression:"Items.passwordItems.password"}})],1),s("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[s("v-text-field",{attrs:{rules:t.Items.passwordItems.passwordRules,"append-icon":t.Items.passwordItems.passwordConfirmationIsVisible?"mdi-eye":"mdi-eye-off",type:t.Items.passwordItems.passwordConfirmationIsVisible?"text":"password",label:t.$ln("確認密碼"),hint:t.$ln("長度需為 4 位以上，並且是字母和數字的組合"),required:""},on:{"click:append":function(e){t.Items.passwordItems.passwordConfirmationIsVisible=!t.Items.passwordItems.passwordConfirmationIsVisible}},model:{value:t.Items.passwordItems.passwordConfirmation,callback:function(e){t.$set(t.Items.passwordItems,"passwordConfirmation",e)},expression:"Items.passwordItems.passwordConfirmation"}})],1),t.Items.sportCreditItems.show?s("v-flex",{attrs:{xs12:""}},[s("v-text-field",{staticClass:"v-input-input",attrs:{rules:t.Items.sportQuotaRules,suffix:""+t.Items.sportCreditItems.suffixLeft+t.Items.sportSurplusQuota+t.Items.sportCreditItems.suffixRight,placeholder:t.$ln("額度"),disabled:t.Items.sportCreditItems.disabled,label:t.$ln("(體育)信用額度")},model:{value:t.Items.sportCreditItems.amount,callback:function(e){t.$set(t.Items.sportCreditItems,"amount",t._n(e))},expression:"Items.sportCreditItems.amount"}})],1):t._e(),t.Items.sportCashItems.show?s("v-flex",{attrs:{xs12:""}},[s("v-text-field",{staticClass:"v-input-input",attrs:{rules:t.Items.sportQuotaRules,suffix:""+t.Items.sportCashItems.suffixLeft+t.Items.sportSurplusQuota+t.Items.sportCashItems.suffixRight,placeholder:t.$ln("額度"),disabled:t.Items.sportCashItems.disabled,label:t.$ln("(體育)現金額度")},model:{value:t.Items.sportCashItems.amount,callback:function(e){t.$set(t.Items.sportCashItems,"amount",t._n(e))},expression:"Items.sportCashItems.amount"}})],1):t._e()],1)],1)],1),s("div",{staticClass:"text-xs-right pt-2"},[s("v-spacer"),s("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:function(e){t.toBack()}}},[t._v(t._s(t.$ln("取消")))]),t.Items.valid?s("v-btn",{attrs:{color:"deep-orange darken-1",small:""},on:{click:function(e){t.add()}}},[t._v(t._s(t.$ln("新增")))]):s("v-btn",{attrs:{disabled:"",small:"",color:"deep-orange darken-1"}},[t._v(t._s(t.$ln("新增")))])],1)],1)}),[],!1,null,null,null);u.options.__file="Copy.vue";e["default"]=u.exports},a2fc:function(t,e,s){"use strict";var r=s("2f62"),o=s("ed08");function a(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(t){return Object.getOwnPropertyDescriptor(s,t).enumerable})))),r.forEach((function(e){n(t,e,s[e])}))}return t}function n(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var u={name:"",props:{},data:function(){return{Items:{dialogOpen:!1,valid:!1,account:{selected:"",options:[]},nameItems:{name:"",nameRules:[]},passwordItems:{password:"",passwordIsVisible:!1,passwordConfirmation:"",passwordConfirmationIsVisible:!1,passwordRules:[]},sportCreditItems:{amount:0,suffixLeft:"",suffixRight:"",disabled:!1,show:!0},sportCashItems:{amount:0,suffixLeft:"",suffixRight:"",disabled:!1,show:!0},sportSurplusQuota:0,sportQuotaRules:[]},searchUpAccount:""}},watch:{"$store.state.lang":function(t){this.initLanguage()}},computed:a({},Object(r.c)({getGenerateGleadAccountState:"account-management/getGenerateGleadAccountState",getProfileState:"account-management/getProfileState",getDashboardInfoState:"account-management/getDashboardInfoState"})),methods:a({},Object(r.b)({postSuperAccount:"api/postSuperAccount",getGenerateAccount:"api/getGenerateAccount",getSuperAccountQuota:"api/getSuperAccountQuota",getDownAccount:"api/getDownAccount"}),{toBack:function(){if(7===this.upLevel){var t=this.$route.path.replace(/\/copy/i,"");this.$router.push(t)}else if(parseInt(sessionStorage.getItem("super.manage.level"))===this.upLevel){var e=this.$route.path.replace(/copy/i,"directList");this.$router.push(e)}else{var s=this.$route.path.replace(/\/copy/i,"");this.$route.query.searchStatus&&this.searchUpAccount?this.$router.push({path:s,query:{upAccount:this.searchUpAccount}}):this.$route.query.upAccount?this.$router.push({path:s,query:{upAccount:this.$route.query.upAccount}}):this.$router.push(s)}},add:function(){var t=this,e={copyAccount:this.$route.query.item.l_no,l_no:this.Items.account.selected,l_name:this.Items.nameItems.name,l_pwd:this.Items.passwordItems.password,l_pwd_confirmation:this.Items.passwordItems.passwordConfirmation};this.level<6&&this.getProfileState.hasOwnProperty("result")&&this.getProfileState.result!==undefined?this.getProfileState.result.l_lv!==this.upLevel?this.$route.query.searchStatus&&this.searchUpAccount?e.upAccount=this.searchUpAccount:this.$route.query.upAccount&&(e.upAccount=this.$route.query.upAccount):e.upAccount=sessionStorage.getItem("super.manage.account"):6===this.level&&(e.upAccount=sessionStorage.getItem("super.manage.account")),this.Items.sportCreditItems.show&&!this.Items.sportCashItems.show?e.quota_LCtotal=this.Items.sportCreditItems.amount:!this.Items.sportCreditItems.show&&this.Items.sportCashItems.show&&(e.quota_LCtotal=this.Items.sportCashItems.amount);try{this.postSuperAccount(e).then((function(e){"[object Error]"===Object.prototype.toString.call(e)&&e.hasOwnProperty("response")&&200!==e.response.status?e.response.data.hasOwnProperty("errors")?o.a.errorMsgHandler(e.response.data.errors):t.$toastr.error(t.$ln("新增失敗")):200===e.status&&(t.$toastr.success(t.$ln("新增成功"),"",{timeOut:2e3,closeButton:!1}),t.clearField(),t.loadGenerateAccount(),t.toBack(),o.a.clearAccountListSession())}))["catch"]((function(e){t.$toastr.error(t.$ln("新增失敗"))}))}catch(s){this.$toastr.error(this.$ln("站台資料錯誤，請聯絡客服"))}},loadGenerateAccount:function(){var t=this,e={type:"glead"};parseInt(sessionStorage.getItem("super.manage.level"))!==this.upLevel&&this.level<6&&(this.$route.query.searchStatus&&this.searchUpAccount?e.l_no=this.searchUpAccount:this.$route.query.upAccount&&(e.l_no=this.$route.query.upAccount));try{this.getGenerateAccount(e).then((function(e){if("[object Error]"===Object.prototype.toString.call(e)&&e.hasOwnProperty("response")&&200!==e.response.status){if(401===e.response.status)return;e.response.data.hasOwnProperty("errors")?o.a.errorMsgHandler(e.response.data.errors):t.$toastr.error(t.$ln("取得可新增管端帳號失敗"))}else 200===e.status&&(e.data.hasOwnProperty("errors")||e.data.hasOwnProperty("result"))}))["catch"]((function(t){}))}catch(s){this.$toastr.error(this.$ln("站台資料錯誤，請聯絡客服"))}},clearField:function(){this.Items.nameItems.name="",this.Items.passwordItems.password="",this.Items.passwordItems.passwordConfirmation="",this.Items.sportCreditItems.amount="",this.Items.sportCashItems.amount=""},getDefault:function(){var t=this;try{var e={};parseInt(sessionStorage.getItem("super.manage.level"))!==this.upLevel&&this.level<6&&(this.$route.query.searchStatus&&this.searchUpAccount?e.l_no=this.searchUpAccount:this.$route.query.upAccount&&(e.l_no=this.$route.query.upAccount)),this.getSuperAccountQuota(e).then((function(e){if("[object Error]"===Object.prototype.toString.call(e)&&e.hasOwnProperty("response")&&200!==e.response.status){if(401===e.response.status)return;e.response.data.hasOwnProperty("errors")?o.a.errorMsgHandler(e.response.data.errors):t.$toastr.error(t.$ln("取得額度預設值失敗"))}else 200===e.status&&(e.data.hasOwnProperty("errors")||e.data.hasOwnProperty("result")&&e.data.result.hasOwnProperty("quota")&&e.data.result.quota.hasOwnProperty("sport")&&(t.Items.sportSurplusQuota=e.data.result.quota.sport.surplus))}))["catch"]((function(t){}))}catch(s){this.$toastr.error(this.$ln("站台資料錯誤，請聯絡客服"))}},updateDashboardInfo:function(){var t=JSON.parse(sessionStorage.getItem("super.manage.dashboard.info"));if(t&&t.hasOwnProperty("wsType"))switch(t.wsType){case 1:this.Items.sportCashItems.show=!0,this.Items.sportCreditItems.show=!1;break;case 2:this.Items.sportCreditItems.show=!0,this.Items.sportCashItems.show=!1}},initLanguage:function(){var t=this;this.Items.nameItems.nameRules=[function(e){return!!e||t.$ln("不能為空")},function(e){return/^[\u4e00-\u9fa5_A-Za-z0-9\(\)\_\-]+$/.test(e)||""===e||t.$ln("不能為特殊符號或空格，除了「括號()」、「底線_」和「-」")},function(e){return e.length<=20||t.$ln("不能超過 20 個字元")}],this.Items.passwordItems.passwordRules=[function(e){return!!e||t.$ln("不能為空")},function(e){return 0===e.length||e.length>=4||t.$ln("長度需為 4 位以上")},function(e){return/^[A-Za-z0-9]+$/.test(e)||""===e||t.$ln("需為英文或數字")},function(e){return!/^[0-9]+$/.test(e)||""===e||t.$ln("需為英文加數字組合")},function(e){return!/^[A-Za-z]+$/.test(e)||""===e||t.$ln("需為英文加數字組合")}],this.Items.sportCreditItems.suffixLeft="(".concat(this.$ln("萬"),") / "),this.Items.sportCreditItems.suffixRight=" (".concat(this.$ln("萬"),")"),this.Items.sportCashItems.suffixLeft="".concat(this.$ln(sessionStorage.getItem("super.manage.dashboard.info.unit2"))," / "),this.Items.sportCashItems.suffixRight=" ".concat(this.$ln(sessionStorage.getItem("super.manage.dashboard.info.unit2"))),this.Items.sportQuotaRules=[function(e){return""!==e||t.$ln("不能為空")},function(e){return/^\d+(\.\d+)*$/.test(e)||""===e||t.$ln("只能數字不能負數和空格")},function(e){return e<=parseFloat(t.Items.sportSurplusQuota)||t.$ln("要小於等於 %s",t.Items.sportSurplusQuota)}]}}),beforeCreate:function(){},created:function(){},beforeMount:function(){},mounted:function(){this.initLanguage()},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){}},i=(s("1fac"),s("2877")),c=Object(i.a)(u,(function(){var t=this.$createElement;return(this._self._c||t)("div")}),[],!1,null,"f88d5546",null);c.options.__file="Copy.vue";e.a=c.exports},c580:function(t,e,s){"use strict";var r=s("6b49");s.n(r).a},ffeb:function(t,e,s){}}]);
//# sourceMappingURL=chunk-3ecbf1b1.2d3209fc.js.map