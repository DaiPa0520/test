{"version":3,"sources":["webpack:///./src/views/manage/report/history-report/Result.vue?43ec","webpack:///./src/views/manage/report/history-report/Result.vue?5fc3","webpack:///./src/views/manage/report/history-report/Result.vue?4539","webpack:///src/views/manage/report/history-report/Result.vue","webpack:///./src/views/manage/report/history-report/Result.vue"],"names":["name","mixins","components","LoadingPage","ReportBills","data","exceptionMessage","gameHallItems","selected","options","searchItems","count_date","count_date_end","vendor","click_acc","search_acc","ball_type","game_type","play_type","bg_game","lt_game","ry_game","reportUrl","mounted","this","updateDashboardInfo","$route","query","reportItems","ballTypeItems","join","ballGameTypeItems","ballPlayTypeItems","searchVendorItems","push","switchVendor","indexOf","split","length","$toastr","info","$ln","loadResult","undefined","hasOwnProperty","getBackAccount","backAccount","backLevel","searchTree","parseInt","sessionStorage","getItem","key","obj","search_tree","backInfo","backReportStatus","toBack","methods","loadingStatus","getHistoryReport","getSearchItems","error","dashboardInfo","closeGameType","noOpenGame","i","openGameType","type","bgTypeItems","ltTypeItems","ryTypeItems","show","component","_vm","_h","$createElement","_c","_self","staticClass","attrs","mapVendorItems","backAccountReport","_v","_s","searchInfo","showTime","reciprocalItems","updateTableList","on","$event","stratumItems","stratumSelectAll","reportList","getAccountReport","getReturnItems","__file"],"mappings":"mIAAA,uBAAomB,G,0CCApmB,I,oCCA6X,ECkG7X,CACEA,KAAM,sBACNC,OAAQ,C,UAAV,GACEC,WAAY,CACVC,YAAJ,aACIC,YAAJ,cAEEC,KAPF,WAQI,MAAO,CAELC,iBAAkB,GAElBC,cAAe,CAEbC,SAAU,GACVC,QAAS,CACjB,CACU,KAAV,KACU,MAAV,cACU,KAAV,MACU,MAAV,GAEA,CACU,KAAV,iBACU,MAAV,WACU,KAAV,eACU,MAAV,GAEA,CACU,KAAV,KACU,MAAV,KACU,KAAV,QACU,MAAV,GAEA,CACU,KAAV,YACU,MAAV,KACU,KAAV,QACU,MAAV,GAEA,CACU,KAAV,UACU,MAAV,KACU,KAAV,UACU,MAAV,GAEA,CACU,KAAV,KACU,MAAV,KACU,KAAV,QACU,MAAV,KAIMC,YAAa,CAIXC,WAAY,EAApB,qFAEQC,eAAgB,EAAxB,wFAEQC,OAAQ,GAERC,UAAW,GAEXC,WAAY,EAApB,mFAEQC,UAAW,GAEXC,UAAW,GAEXC,UAAW,GAEXC,QAAS,GAETC,QAAS,GAETC,QAAS,IAGXC,UAAW,mCAGfC,QApFF,WAwFI,GAHAC,KAAKC,sBAGD,EAAR,0CAEMD,KAAKd,YAAYM,UAAYQ,KAAKE,OAAOC,MAAMC,YAAYC,cAAcrB,SAASsB,KAAK,KAEvFN,KAAKd,YAAYO,UAAYO,KAAKE,OAAOC,MAAMC,YAAYG,kBAAkBvB,SAASsB,KAAK,KAE3FN,KAAKd,YAAYQ,UAAYM,KAAKE,OAAOC,MAAMC,YAAYI,kBAAkBxB,SAASsB,KAAK,KAGxD,KAA/BN,KAAKd,YAAYM,WACnBQ,KAAKS,kBAAkBC,KAAK,MAG9BV,KAAKW,eAGLX,KAAKd,YAAYG,OAASW,KAAKjB,cAAcC,UAGC,IAA1CgB,KAAKS,kBAAkBG,QAAQ,QACiB,IAA9CZ,KAAKd,YAAYG,OAAOwB,MAAM,KAAKC,OACrCd,KAAKe,QAAQC,KAAKhB,KAAKiB,IAAI,aAArC,+CAEUjB,KAAKe,QAAQC,KAAKhB,KAAKiB,IAAI,4BAK/BjB,KAAKkB,WAAWC,UAAW,eACjC,gDACM,GAAInB,KAAKE,OAAOC,MAAMiB,eAAe,gBAC3C,+CAEQpB,KAAKqB,eAAerB,KAAKE,OAAOC,MAAMmB,YAAatB,KAAKE,OAAOC,MAAMoB,UAAWvB,KAAKE,OAAOC,MAAMqB,YAElG,IAAR,gCAEQ,GAAgE,IAA5DC,SAASC,eAAeC,QAAQ,yBAAiCD,eAAeC,QAAQ,yBAA0B,CAEpHzC,EAAYK,WAAamC,eAAeC,QAAQ,yBAEhD,IAAV,KACU,IAAK,IAAf,OAEwB,cAARC,GAA+B,gBAARA,IACzBC,EAAID,GAAO1C,EAAY0C,IAG3B1C,EAAc2C,OAId3C,EAAYI,UAAYU,KAAKE,OAAOC,MAAMmB,YAE1CpC,EAAY4C,YAAc9B,KAAKE,OAAOC,MAAMqB,WAE9CxB,KAAKd,YAAcA,EAGfc,KAAKE,OAAOC,MAAMM,oBAAmBT,KAAKS,kBAAoBT,KAAKE,OAAOC,MAAMM,mBAEpFT,KAAKjB,cAAcC,SAAWgB,KAAKd,YAAYG,OAG/CW,KAAKW,eAGLX,KAAKkB,aAGDlB,KAAKE,OAAOC,MAAMoB,YAAc,SAA5C,iDACUvB,KAAK+B,SAASC,kBAAmB,EAEjChC,KAAK+B,SAASC,kBAAmB,QAKrChC,KAAKiC,UAGTC,QAAS,CACPhB,WADJ,SACA,gBAEMlB,KAAKmC,eAAgB,EAErB,IAAN,mCAEM,IACEnC,KAAKoC,iBAAiBC,GAC9B,kBACU,GAAV,sDACA,8BACA,wBAEA,wBACc,EAAd,iDAAgB,QAAhB,KAAgB,gBAAhB,IAAgB,aAAhB,IAEA,yCACc,EAAd,0CAGc,EAAd,iCAGY,EAAZ,cACA,kBAEY,GAAZ,gCAGc,EAAd,cACA,oCACc,IAAd,KACA,IACA,KAEc,IAAd,4BAEgB,GAAhB,EACgB,EAAhB,yBACgB,EAAhB,4BAEgB,EAAhB,sCAcc,IAAd,QAXA,eACgB,eAAhB,iCAEA,8CACkB,eAAlB,+CAIc,EAAd,sBAGA,qBACA,gDACA,+CACA,oFAKA,oFAGc,EAAd,qDACc,EAAd,2CACc,EAAd,2CACc,EAAd,2CAGc,EAAd,oDACc,EAAd,qDACc,EAAd,wDACc,EAAd,2DACc,EAAd,6DACc,EAAd,0DACc,EAAd,4DACc,EAAd,8DACc,EAAd,iEACc,EAAd,mEACc,EAAd,qEACc,EAAd,gEACc,EAAd,kEACc,EAAd,oEACc,EAAd,qEACc,EAAd,uEACc,EAAd,yEACc,EAAd,6DACc,EAAd,+DACc,EAAd,iEACc,EAAd,kEACc,EAAd,oEACc,EAAd,2EAIc,EAAd,SAIU,EAAV,oBAEA,sBAGU,EAAV,oBAEA,SACQrC,KAAKe,QAAQuB,MAAMtC,KAAKiB,IAAI,mBAKhChB,oBApHJ,WAqHM,IAAN,oEACM,GAAIsC,GAAiBA,EAAcnB,eAAe,cAAe,CAE/D,IAAK,IAAb,kBACUpB,KAAKwC,cAAcD,EAAcE,WAAWC,KAIG,IAA7CH,EAAcE,WAAW7B,QAAQ,QACnCZ,KAAK2C,aAAa,QAG6B,IAA7CJ,EAAcE,WAAW7B,QAAQ,QACnCZ,KAAK2C,aAAa,QAG6B,IAA7CJ,EAAcE,WAAW7B,QAAQ,QACnCZ,KAAK2C,aAAa,SAKxBA,aA3IJ,SA2IA,GACM,OAAQC,GAEN,IAAK,MACC,EAAd,4CAEY5C,KAAKd,YAAYS,QAAUK,KAAKE,OAAOC,MAAMC,YAAYyC,YAAY7D,SAASsB,KAAK,KAGlD,KAA7BN,KAAKd,YAAYS,SACnBK,KAAKS,kBAAkBC,KAAK,OAGhC,MAEF,IAAK,MACC,EAAd,4CAEYV,KAAKd,YAAYU,QAAUI,KAAKE,OAAOC,MAAMC,YAAY0C,YAAY9D,SAASsB,KAAK,KAGlD,KAA7BN,KAAKd,YAAYU,SACnBI,KAAKS,kBAAkBC,KAAK,OAGhC,MAEF,IAAK,MACC,EAAd,4CAEYV,KAAKd,YAAYW,QAAUG,KAAKE,OAAOC,MAAMC,YAAY2C,YAAY/D,SAASsB,KAAK,KAGlD,KAA7BN,KAAKd,YAAYW,SACnBG,KAAKS,kBAAkBC,KAAK,SAOtC8B,cApLJ,SAoLA,GACM,OAAQI,GAEN,IAAK,MACH,IAAK,IAAf,gCACuD,UAAvC5C,KAAKjB,cAAcE,QAAQyD,GAAGE,OAChC5C,KAAKjB,cAAcE,QAAQyD,GAAGM,MAAO,GAGzC,MAEF,IAAK,MACH,IAAK,IAAf,gCACA,YAAgBhD,KAAKjB,cAAcE,QAAQ,GAA3C,OACce,KAAKjB,cAAcE,QAAQ,GAAzC,SAGU,MAEF,IAAK,MACH,IAAK,IAAf,gCACA,UAAgBe,KAAKjB,cAAcE,QAAQ,GAA3C,OACce,KAAKjB,cAAcE,QAAQ,GAAzC,a,wBC7cIgE,EAAY,YACd,GHTW,WAAa,IAAIC,EAAIlD,KAASmD,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,cAAc,CAACG,MAAM,CAAC,MAAQ,GAAG,eAAe,KAAK,CAAGN,EAAInB,SAASC,iBAAmRqB,EAAG,gBAAgB,CAACG,MAAM,CAAC,MAASN,EAAIO,eAAeP,EAAInE,cAAcC,UAAakE,EAAIjC,IAAIiC,EAAIO,eAAeP,EAAInE,cAAcC,WAAakE,EAAIjC,IAAI,QAAUiC,EAAIjC,IAAI,QAAQ,OAASiC,EAAIQ,kBAAkB,iBAAmBR,EAAIpE,oBAAzeuE,EAAG,gBAAgB,CAACG,MAAM,CAAC,MAASN,EAAIO,eAAeP,EAAInE,cAAcC,UAAakE,EAAIjC,IAAIiC,EAAIO,eAAeP,EAAInE,cAAcC,WAAakE,EAAIjC,IAAI,QAAUiC,EAAIjC,IAAI,QAAQ,SAAW,KAAK,OAASiC,EAAIjB,OAAO,iBAAmBiB,EAAIpE,oBAAgRuE,EAAG,WAAW,CAACE,YAAY,OAAOC,MAAM,CAAC,IAAM,GAAG,KAAO,KAAK,CAACH,EAAG,SAAS,CAACG,MAAM,CAAC,IAAM,GAAG,KAAO,KAAK,CAACN,EAAIS,GAAG,aAAaT,EAAIU,GAAGV,EAAIjC,IAAI,SAAS,KAAKoC,EAAG,MAAMH,EAAIS,GAAGT,EAAIU,GAAGV,EAAIW,WAAWC,UAAU,cAAcT,EAAG,gBAAgB,CAACG,MAAM,CAAC,gBAAkBN,EAAIa,gBAAgB,gBAAkBb,EAAIc,iBAAiBC,GAAG,CAAC,yBAAyB,SAASC,GAAQhB,EAAIa,gBAAgBG,OAAY,GAAIhB,EAAiB,cAAEG,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,cAAc,CAACG,MAAM,CAAC,YAAY,UAAU,GAAGH,EAAG,MAAM,CAACA,EAAG,2BAA2B,CAACG,MAAM,CAAC,WAAaN,EAAIW,YAAYI,GAAG,CAAC,oBAAoB,SAASC,GAAQhB,EAAIW,WAAWK,MAAWb,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,0BAA0B,CAACG,MAAM,CAAC,WAAaN,EAAIW,YAAYI,GAAG,CAAC,oBAAoB,SAASC,GAAQhB,EAAIW,WAAWK,MAAWb,EAAG,cAAc,CAACG,MAAM,CAAC,UAAYN,EAAInE,cAAc,MAAQmE,EAAIjC,IAAI,OAAOgD,GAAG,CAAC,mBAAmB,SAASC,GAAQhB,EAAInE,cAAcmF,MAAWb,EAAG,iBAAiB,CAACG,MAAM,CAAC,UAAYN,EAAIiB,aAAa,cAAgBjB,EAAIkB,iBAAiB,MAAQlB,EAAIjC,IAAI,MAAM,SAAW,OAAOgD,GAAG,CAAC,mBAAmB,SAASC,GAAQhB,EAAIiB,aAAaD,GAAQ,uBAAuB,SAASA,GAAQhB,EAAIkB,iBAAiBF,OAAY,GAAGb,EAAG,cAAc,CAACG,MAAM,CAAC,KAAON,EAAImB,WAAW,YAAcnB,EAAIiB,aAAa,iBAAmBjB,EAAIoB,iBAAiB,cAAgBpB,EAAInE,cAAc,YAAcmE,EAAIhE,YAAY,eAAiBgE,EAAIqB,eAAe,QAAUrB,EAAIpD,UAAU,kBAAoBoD,EAAIzC,kBAAkB,SAAW,MAAM,WAAayC,EAAIW,YAAYI,GAAG,CAAC,cAAc,SAASC,GAAQhB,EAAImB,WAAWH,GAAQ,qBAAqB,SAASA,GAAQhB,EAAIiB,aAAaD,GAAQ,uBAAuB,SAASA,GAAQhB,EAAInE,cAAcmF,GAAQ,qBAAqB,SAASA,GAAQhB,EAAIhE,YAAYgF,GAAQ,2BAA2B,SAASA,GAAQhB,EAAIzC,kBAAkByD,OAAY,IAAI,IAAI,KAC1jF,IGWpB,EACA,KACA,WACA,MAIFjB,EAAUhE,QAAQuF,OAAS,aACZ,aAAAvB,E","file":"js/chunk-51fce8f8.518d9d30.js","sourcesContent":["import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Result.vue?vue&type=style&index=0&id=0a085633&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Result.vue?vue&type=style&index=0&id=0a085633&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"reportTable\"},[_c('v-container',{attrs:{\"fluid\":\"\",\"grid-list-xl\":\"\"}},[(!_vm.backInfo.backReportStatus)?_c('CommonBtnBack',{attrs:{\"Title\":(_vm.mapVendorItems[_vm.gameHallItems.selected]) ? _vm.$ln(_vm.mapVendorItems[_vm.gameHallItems.selected]) + _vm.$ln('歷史報表') : _vm.$ln('歷史報表'),\"BtnTitle\":'返回',\"toBack\":_vm.toBack,\"ExceptionMessage\":_vm.exceptionMessage}}):_c('CommonBtnBack',{attrs:{\"Title\":(_vm.mapVendorItems[_vm.gameHallItems.selected]) ? _vm.$ln(_vm.mapVendorItems[_vm.gameHallItems.selected]) + _vm.$ln('歷史報表') : _vm.$ln('歷史報表'),\"toBack\":_vm.backAccountReport,\"ExceptionMessage\":_vm.exceptionMessage}}),_c('v-layout',{staticClass:\"pl-1\",attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"md9\":\"\",\"xs12\":\"\"}},[_vm._v(\"\\n        \"+_vm._s(_vm.$ln('帳務日期'))+\"：\"),_c('br'),_vm._v(_vm._s(_vm.searchInfo.showTime)+\"\\n      \")]),_c('CommonCounter',{attrs:{\"reciprocalItems\":_vm.reciprocalItems,\"updateTableList\":_vm.updateTableList},on:{\"update:reciprocalItems\":function($event){_vm.reciprocalItems=$event}}})],1),(_vm.loadingStatus)?_c('div',{staticClass:\"text-xs-center\"},[_c('LoadingPage',{attrs:{\"show-text\":'搜尋中'}})],1):_c('div',[_c('ReportSearchInfoCollapse',{attrs:{\"searchInfo\":_vm.searchInfo},on:{\"update:searchInfo\":function($event){_vm.searchInfo=$event}}}),_c('div',{staticClass:\"pl-1\"},[_c('ReportSearchInfoContent',{attrs:{\"searchInfo\":_vm.searchInfo},on:{\"update:searchInfo\":function($event){_vm.searchInfo=$event}}}),_c('CommonRadio',{attrs:{\"TypeItems\":_vm.gameHallItems,\"Title\":_vm.$ln('館別')},on:{\"update:TypeItems\":function($event){_vm.gameHallItems=$event}}}),_c('CommonCheckbox',{attrs:{\"TypeItems\":_vm.stratumItems,\"TypeSelectAll\":_vm.stratumSelectAll,\"Title\":_vm.$ln('顯示'),\"TitlePos\":\"top\"},on:{\"update:TypeItems\":function($event){_vm.stratumItems=$event},\"update:TypeSelectAll\":function($event){_vm.stratumSelectAll=$event}}})],1),_c('ReportTable',{attrs:{\"List\":_vm.reportList,\"SelectItems\":_vm.stratumItems,\"getAccountReport\":_vm.getAccountReport,\"gameHallItems\":_vm.gameHallItems,\"searchItems\":_vm.searchItems,\"getReturnItems\":_vm.getReturnItems,\"nextUrl\":_vm.reportUrl,\"searchVendorItems\":_vm.searchVendorItems,\"category\":'his',\"searchInfo\":_vm.searchInfo},on:{\"update:List\":function($event){_vm.reportList=$event},\"update:SelectItems\":function($event){_vm.stratumItems=$event},\"update:gameHallItems\":function($event){_vm.gameHallItems=$event},\"update:searchItems\":function($event){_vm.searchItems=$event},\"update:searchVendorItems\":function($event){_vm.searchVendorItems=$event}}})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Result.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Result.vue?vue&type=script&lang=js&\"","<template>\r\n  <div class=\"reportTable\">\r\n    <v-container\r\n      fluid\r\n      grid-list-xl>\r\n\r\n      <!-- 標題 -->\r\n      <!-- 原 BtnTitle=\"返回歷史報表\" 改成 BtnTitle=\"返回\"-->\r\n      <CommonBtnBack\r\n        v-if=\"!backInfo.backReportStatus\"\r\n        :Title=\"(mapVendorItems[gameHallItems.selected]) ? $ln(mapVendorItems[gameHallItems.selected]) + $ln('歷史報表') : $ln('歷史報表')\"\r\n        :BtnTitle=\"'返回'\"\r\n        :toBack=\"toBack\"\r\n        :ExceptionMessage=\"exceptionMessage\"\r\n      />\r\n      <CommonBtnBack\r\n        v-else\r\n        :Title=\"(mapVendorItems[gameHallItems.selected]) ? $ln(mapVendorItems[gameHallItems.selected]) + $ln('歷史報表') : $ln('歷史報表')\"\r\n        :toBack=\"backAccountReport\"\r\n        :ExceptionMessage=\"exceptionMessage\"\r\n      />\r\n\r\n      <!-- 帳務日期 -->\r\n      <v-layout\r\n        row\r\n        wrap\r\n        class=\"pl-1\">\r\n        <v-flex\r\n          md9\r\n          xs12>\r\n          {{ $ln('帳務日期') }}：<br>{{ searchInfo.showTime }}\r\n        </v-flex>\r\n\r\n        <!-- 每秒更新 -->\r\n        <CommonCounter\r\n          :reciprocalItems.sync=\"reciprocalItems\"\r\n          :updateTableList=\"updateTableList\"\r\n        />\r\n      </v-layout>\r\n\r\n      <div\r\n        v-if=\"loadingStatus\"\r\n        class=\"text-xs-center\">\r\n        <LoadingPage :show-text=\"'搜尋中'\"/>\r\n      </div>\r\n      <div v-else>\r\n\r\n        <!-- 展開搜尋條件開關 -->\r\n        <ReportSearchInfoCollapse\r\n          :searchInfo.sync=\"searchInfo\"\r\n        />\r\n\r\n        <div class=\"pl-1\">\r\n          <!-- 展開搜尋條件內容 -->\r\n          <ReportSearchInfoContent\r\n            :searchInfo.sync=\"searchInfo\"\r\n          />\r\n\r\n          <!-- 館別 -->\r\n          <CommonRadio\r\n            :TypeItems.sync=\"gameHallItems\"\r\n            :Title=\"$ln('館別')\"\r\n          />\r\n\r\n          <!-- 顯示 -->\r\n          <CommonCheckbox\r\n            :TypeItems.sync=\"stratumItems\"\r\n            :TypeSelectAll.sync=\"stratumSelectAll\"\r\n            :Title=\"$ln('顯示')\"\r\n            TitlePos=\"top\"\r\n          />\r\n        </div>\r\n\r\n        <!-- 搜尋列表 -->\r\n        <ReportTable\r\n          :List.sync=\"reportList\"\r\n          :SelectItems.sync=\"stratumItems\"\r\n          :getAccountReport=\"getAccountReport\"\r\n          :gameHallItems.sync=\"gameHallItems\"\r\n          :searchItems.sync=\"searchItems\"\r\n          :getReturnItems=\"getReturnItems\"\r\n          :nextUrl=\"reportUrl\"\r\n          :searchVendorItems.sync=\"searchVendorItems\"\r\n          :category=\"'his'\"\r\n          :searchInfo=\"searchInfo\"\r\n        />\r\n\r\n      </div>\r\n    </v-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { common } from '@/utils'\r\nimport LoadingPage from '@/components/material/LoadingPage'\r\nimport ReportBills from '@/views/manage/report/report-bills'\r\nimport Result from '@/mixins/report/Result'\r\n\r\nexport default {\r\n  name: 'HistoryReportResult',\r\n  mixins: [Result],\r\n  components: {\r\n    LoadingPage,\r\n    ReportBills\r\n  },\r\n  data () {\r\n    return {\r\n      // 帳務日開錯導致報表異常訊息提示(只有歷史報表有)\r\n      exceptionMessage: '',\r\n      // 館別 (pe體彩, lt彩球, ry皇家, bg賓果)\r\n      gameHallItems: {\r\n        // selected: 'pe,bg,lt,ry',\r\n        selected: '',\r\n        options: [\r\n          {\r\n            text: '全部',\r\n            value: 'pe,bg,lt,ry',\r\n            type: 'all',\r\n            show: true\r\n          },\r\n          {\r\n            text: '全部(不包含Super彩球)',\r\n            value: 'pe,bg,ry',\r\n            type: 'allNoLottery',\r\n            show: true\r\n          },\r\n          {\r\n            text: '體彩',\r\n            value: 'pe',\r\n            type: 'sport',\r\n            show: true\r\n          },\r\n          {\r\n            text: 'BingoStar',\r\n            value: 'bg',\r\n            type: 'bingo',\r\n            show: true\r\n          },\r\n          {\r\n            text: 'Super彩球',\r\n            value: 'lt',\r\n            type: 'lottery',\r\n            show: true\r\n          },\r\n          {\r\n            text: '皇家',\r\n            value: 'ry',\r\n            type: 'royal',\r\n            show: true\r\n          }\r\n        ]\r\n      },\r\n      searchItems: {\r\n        // 報表類型(cur當日,his歷史,time時間,post未匯帳)\r\n        // type: 'his', // API 請求參數直接設置\r\n        // 帳務日期起\r\n        count_date: common.isObject(this.$route.query.reportItems) ? this.$route.query.reportItems.countDate : '',\r\n        // 帳務日期迄\r\n        count_date_end: common.isObject(this.$route.query.reportItems) ? this.$route.query.reportItems.countDateEnd : '',\r\n        // 館別\r\n        vendor: '',\r\n        // 點擊帳號\r\n        click_acc: '',\r\n        // 查詢帳號\r\n        search_acc: common.isObject(this.$route.query.reportItems) ? this.$route.query.reportItems.account : '',\r\n        // [體彩]館別/項目\r\n        ball_type: '',\r\n        // [體彩]類型\r\n        game_type: '',\r\n        // [體彩]玩法\r\n        play_type: '',\r\n        // [BingoStar]館別/項目\r\n        bg_game: '',\r\n        // [彩球]館別/項目\r\n        lt_game: '',\r\n        // [皇家]館別/項目\r\n        ry_game: ''\r\n      },\r\n      // 報表路徑\r\n      reportUrl: '/manage/report/history-report/'\r\n    }\r\n  },\r\n  mounted () {\r\n    this.updateDashboardInfo()\r\n\r\n    // console.log('Get history report: ', this.$route.query.reportItems)\r\n    if (common.isObject(this.$route.query.reportItems)) {\r\n      // [體彩]館別/項目\r\n      this.searchItems.ball_type = this.$route.query.reportItems.ballTypeItems.selected.join(',')\r\n      // [體彩]類型\r\n      this.searchItems.game_type = this.$route.query.reportItems.ballGameTypeItems.selected.join(',')\r\n      // [體彩]玩法\r\n      this.searchItems.play_type = this.$route.query.reportItems.ballPlayTypeItems.selected.join(',')\r\n\r\n      // 欲搜尋[體彩]館別設置\r\n      if (this.searchItems.ball_type !== '') {\r\n        this.searchVendorItems.push('pe')\r\n      }\r\n      // 開關館別選項\r\n      this.switchVendor()\r\n\r\n      // 館別\r\n      this.searchItems.vendor = this.gameHallItems.selected\r\n\r\n      // 若有選擇彩球提示預設篩選列表為不包含彩球訊息\r\n      if (this.searchVendorItems.indexOf('lt') !== -1) {\r\n        if (this.searchItems.vendor.split(',').length === 1) {\r\n          this.$toastr.info(this.$ln(`預設搜尋「%s」館別`, this.mapVendorItems[this.searchItems.vendor]))\r\n        } else {\r\n          this.$toastr.info(this.$ln(`預設搜尋「全部(不包含Super彩球)」館別`))\r\n        }\r\n      }\r\n\r\n      // 刷新列表\r\n      this.loadResult(undefined, 'search')\r\n    } else if (common.isObject(this.$route.query.searchItems)) { // 從注單明細返回會員帳號報表\r\n      if (this.$route.query.hasOwnProperty('backAccount') &&\r\n          this.$route.query.hasOwnProperty('backLevel')) {\r\n        // 取得返回上層報表的搜尋帳號\r\n        this.getBackAccount(this.$route.query.backAccount, this.$route.query.backLevel, this.$route.query.searchTree)\r\n\r\n        let searchItems = this.$route.query.searchItems\r\n        // 一開始搜尋為會員等級不送 click_acc 參數和 search_tree 參數，則送 search_acc 參數\r\n        if (parseInt(sessionStorage.getItem('report.search.level')) === 1 && sessionStorage.getItem('report.search.account')) {\r\n          // 設置 search_acc 帳號\r\n          searchItems.search_acc = sessionStorage.getItem('report.search.account')\r\n\r\n          let obj = {}\r\n          for (let key in searchItems) {\r\n            // 移除 click_acc 帳號和 search_tree 層級樹請求參數\r\n            if (key !== 'click_acc' && key !== 'search_tree') {\r\n              obj[key] = searchItems[key]\r\n            }\r\n          }\r\n          searchItems = obj\r\n        // 一開始搜尋不為會員等級需送 click_acc 參數和 search_tree 參數\r\n        } else {\r\n          // 設置 click_acc 帳號\r\n          searchItems.click_acc = this.$route.query.backAccount\r\n          // 設置層級線\r\n          searchItems.search_tree = this.$route.query.searchTree\r\n        }\r\n        this.searchItems = searchItems\r\n\r\n        // 欲搜尋館別\r\n        if (this.$route.query.searchVendorItems) this.searchVendorItems = this.$route.query.searchVendorItems\r\n\r\n        this.gameHallItems.selected = this.searchItems.vendor\r\n\r\n        // 開關館別選項\r\n        this.switchVendor()\r\n\r\n        // 刷新列表\r\n        this.loadResult()\r\n\r\n        // 若返回欲搜尋的(上上層級)跟一開始搜尋後的(層級+1)一樣，則[返回按鈕]不返回上層報表，要返回報表首頁\r\n        if (this.$route.query.backLevel === (parseInt(sessionStorage.getItem('report.search.level')) + 1)) {\r\n          this.backInfo.backReportStatus = false\r\n        } else {\r\n          this.backInfo.backReportStatus = true\r\n        }\r\n      }\r\n    } else {\r\n      // 無物件資料，則轉跳上一頁\r\n      this.toBack()\r\n    }\r\n  },\r\n  methods: {\r\n    loadResult (searchItems, searchStatus) {\r\n      // 載入狀態(開始)\r\n      this.loadingStatus = true\r\n\r\n      let getSearchItems = searchItems !== undefined ? searchItems : this.searchItems\r\n      // console.log(`歷史報表搜尋項目:`, getSearchItems, `館別:`, getSearchItems.vendor, `層級樹:`, JSON.stringify(this.searchItems.search_tree))\r\n      try {\r\n        this.getHistoryReport(getSearchItems)\r\n          .then(res => {\r\n            if (Object.prototype.toString.call(res) === '[object Error]' &&\r\n                res.hasOwnProperty('response') &&\r\n                res.response.status !== 200) {\r\n              // 防範帳務日開錯導致報表異常訊息提示\r\n              if (res.response.status === 477) {\r\n                this.$toastr.error(res.response.data.errors.message, '', {timeOut: 3600000, extendedTimeOut: 1000, closeButton: true})\r\n              // 錯誤訊息\r\n              } else if (res.response.data.hasOwnProperty('errors')) {\r\n                common.errorMsgHandler(res.response.data.errors)\r\n              // 其他未知的錯誤\r\n              } else {\r\n                this.$toastr.error(this.$ln(`搜尋歷史報表失敗`))\r\n              }\r\n              // 跳轉回搜尋頁面\r\n              this.toBack()\r\n            } else if (res.status === 200) { // success\r\n              // http 200 回應錯誤訊息\r\n              if (res.data.hasOwnProperty('errors')) {\r\n                console.error('response 200 error: ', res.data)\r\n                // 跳轉回搜尋頁面\r\n                this.toBack()\r\n              } else if (res.data.hasOwnProperty('result')) {\r\n                let items = []\r\n                let id = 0\r\n                let level = ''\r\n                // 重組資料\r\n                for (let i in res.data.result.list) {\r\n                  // 加入 id 資料\r\n                  id = id + 1\r\n                  res.data.result.list[i].id = id\r\n                  items.push(res.data.result.list[i])\r\n                  // 取得層級資訊\r\n                  level = parseInt(res.data.result.list[i].level)\r\n                }\r\n                // 暫存搜尋後的層級\r\n                if (searchStatus === 'search') {\r\n                  sessionStorage.setItem('report.search.level', level)\r\n                  // 暫存搜尋帳號\r\n                  if (getSearchItems.hasOwnProperty('search_acc') && getSearchItems.search_acc) {\r\n                    sessionStorage.setItem('report.search.account', getSearchItems.search_acc)\r\n                  }\r\n                }\r\n                // 更新搜尋後的表格資料\r\n                this.reportList.contents = items\r\n\r\n                // 更新搜尋後的表格 header 帳號欄為名稱\r\n                for (let i in this.reportList.headers) {\r\n                  if (this.reportList.headers[i].hasOwnProperty('type') &&\r\n                      this.reportList.headers[i].type === 'levelAccount') {\r\n                    if (this.mapLevelAccountItems[level]) this.reportList.headers[i].text = this.mapLevelAccountItems[level]\r\n                  }\r\n                }\r\n\r\n                // 更新異常訊息提示\r\n                if (res.data.result.hasOwnProperty('message')) this.exceptionMessage = res.data.result.message\r\n\r\n                // 更新表格上方搜尋資訊\r\n                this.searchInfo.itemsOfVendor = res.data.result.itemsOfVendor\r\n                this.searchInfo.gameType = res.data.result.gameType\r\n                this.searchInfo.playType = res.data.result.playType\r\n                this.searchInfo.showTime = res.data.result.showTime\r\n\r\n                // 各合計資料\r\n                this.reportList.totals.betCount = this.countTotal(items, 'ccount')\r\n                this.reportList.totals.betAmount = this.countTotal(items, 'cmount')\r\n                this.reportList.totals.effectiveBet = this.countTotal(items, 'bmount')\r\n                this.reportList.totals.member.g0_comm = this.countTotal(items, 'g0_comm')\r\n                this.reportList.totals.member.g0_mount = this.countTotal(items, 'g0_mount')\r\n                this.reportList.totals.agent.g1_comm = this.countTotal(items, 'g1_comm')\r\n                this.reportList.totals.agent.g1_mount = this.countTotal(items, 'g1_mount')\r\n                this.reportList.totals.agent.g1_result = this.countTotal(items, 'g1_result')\r\n                this.reportList.totals.generalAgent.g2_comm = this.countTotal(items, 'g2_comm')\r\n                this.reportList.totals.generalAgent.g2_mount = this.countTotal(items, 'g2_mount')\r\n                this.reportList.totals.generalAgent.g2_result = this.countTotal(items, 'g2_result')\r\n                this.reportList.totals.shareholder.g3_comm = this.countTotal(items, 'g3_comm')\r\n                this.reportList.totals.shareholder.g3_mount = this.countTotal(items, 'g3_mount')\r\n                this.reportList.totals.shareholder.g3_result = this.countTotal(items, 'g3_result')\r\n                this.reportList.totals.majorShareholder.g4_comm = this.countTotal(items, 'g4_comm')\r\n                this.reportList.totals.majorShareholder.g4_mount = this.countTotal(items, 'g4_mount')\r\n                this.reportList.totals.majorShareholder.g4_result = this.countTotal(items, 'g4_result')\r\n                this.reportList.totals.director.g5_comm = this.countTotal(items, 'g5_comm')\r\n                this.reportList.totals.director.g5_mount = this.countTotal(items, 'g5_mount')\r\n                this.reportList.totals.director.g5_result = this.countTotal(items, 'g5_result')\r\n                this.reportList.totals.majorDirector.g6_comm = this.countTotal(items, 'g6_comm')\r\n                this.reportList.totals.majorDirector.g6_mount = this.countTotal(items, 'g6_mount')\r\n                this.reportList.totals.majorDirector.g6_result = this.countTotal(items, 'g6_result')\r\n              } else {\r\n                console.error('response 200 other error: ', res.data)\r\n                // 跳轉回搜尋頁面\r\n                this.toBack()\r\n              }\r\n            }\r\n            // 載入狀態(結束)\r\n            this.loadingStatus = false\r\n          })\r\n          .catch(err => {\r\n            console.error(err)\r\n            // 載入狀態(結束)\r\n            this.loadingStatus = false\r\n          })\r\n      } catch (error) {\r\n        this.$toastr.error(this.$ln(`站台資料錯誤，請聯絡客服`))\r\n        console.error(error)\r\n      }\r\n    },\r\n    // 更新大後台設置資訊\r\n    updateDashboardInfo () {\r\n      let dashboardInfo = JSON.parse(sessionStorage.getItem('super.manage.dashboard.info'))\r\n      if (dashboardInfo && dashboardInfo.hasOwnProperty('noOpenGame')) {\r\n        // 不開放遊戲設定\r\n        for (let i in dashboardInfo.noOpenGame) {\r\n          this.closeGameType(dashboardInfo.noOpenGame[i])\r\n        }\r\n\r\n        // 有開放 BingoStar\r\n        if (dashboardInfo.noOpenGame.indexOf('s16') === -1) {\r\n          this.openGameType('s16')\r\n        }\r\n        // 有開放 Super彩球\r\n        if (dashboardInfo.noOpenGame.indexOf('s17') === -1) {\r\n          this.openGameType('s17')\r\n        }\r\n        // 有開放皇家\r\n        if (dashboardInfo.noOpenGame.indexOf('s18') === -1) {\r\n          this.openGameType('s18')\r\n        }\r\n      }\r\n    },\r\n    // 開放遊戲\r\n    openGameType (type) {\r\n      switch (type) {\r\n        // 開放BingoStar\r\n        case 's16':\r\n          if (common.isObject(this.$route.query.reportItems)) {\r\n            // [BingoStar]館別/項目\r\n            this.searchItems.bg_game = this.$route.query.reportItems.bgTypeItems.selected.join(',')\r\n\r\n            // 欲搜尋[BingoStar]館別設置\r\n            if (this.searchItems.bg_game !== '') {\r\n              this.searchVendorItems.push('bg')\r\n            }\r\n          }\r\n          break\r\n        // 開放Super彩球\r\n        case 's17':\r\n          if (common.isObject(this.$route.query.reportItems)) {\r\n            // [Super彩球]館別/項目\r\n            this.searchItems.lt_game = this.$route.query.reportItems.ltTypeItems.selected.join(',')\r\n\r\n            // 欲搜尋[Super彩球]館別設置\r\n            if (this.searchItems.lt_game !== '') {\r\n              this.searchVendorItems.push('lt')\r\n            }\r\n          }\r\n          break\r\n        // 開放皇家視訊\r\n        case 's18':\r\n          if (common.isObject(this.$route.query.reportItems)) {\r\n            // [皇家]館別/項目\r\n            this.searchItems.ry_game = this.$route.query.reportItems.ryTypeItems.selected.join(',')\r\n\r\n            // 欲搜尋[皇家]館別設置\r\n            if (this.searchItems.ry_game !== '') {\r\n              this.searchVendorItems.push('ry')\r\n            }\r\n          }\r\n          break\r\n      }\r\n    },\r\n    // 不開放遊戲\r\n    closeGameType (type) {\r\n      switch (type) {\r\n        // 關閉BingoStar\r\n        case 's16':\r\n          for (let i in this.gameHallItems.options) {\r\n            if (this.gameHallItems.options[i].type === 'bingo') {\r\n              this.gameHallItems.options[i].show = false\r\n            }\r\n          }\r\n          break\r\n        // 關閉Super彩球\r\n        case 's17':\r\n          for (let i in this.gameHallItems.options) {\r\n            if (this.gameHallItems.options[i].type === 'lottery') {\r\n              this.gameHallItems.options[i].show = false\r\n            }\r\n          }\r\n          break\r\n        // 關閉皇家視訊\r\n        case 's18':\r\n          for (let i in this.gameHallItems.options) {\r\n            if (this.gameHallItems.options[i].type === 'royal') {\r\n              this.gameHallItems.options[i].show = false\r\n            }\r\n          }\r\n          break\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n</style>\r\n","import { render, staticRenderFns } from \"./Result.vue?vue&type=template&id=0a085633&scoped=true&\"\nimport script from \"./Result.vue?vue&type=script&lang=js&\"\nexport * from \"./Result.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Result.vue?vue&type=style&index=0&id=0a085633&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0a085633\",\n  null\n  \n)\n\ncomponent.options.__file = \"Result.vue\"\nexport default component.exports"],"sourceRoot":""}