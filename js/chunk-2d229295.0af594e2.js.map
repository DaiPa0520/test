{"version":3,"sources":["webpack:///./src/views/manage/announcement/index.vue?48ab","webpack:///src/views/manage/announcement/index.vue","webpack:///./src/views/manage/announcement/index.vue?9ed8","webpack:///./src/views/manage/announcement/index.vue"],"names":["name","data","selectItems","selected","options","showNoData","headers","announcementList","mapType","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","pagination","currentPage","rowsPerPage","totalItems","loadingStatus","gamelist","locate","site_number","ball","page","count","computed","pages","this","Math","ceil","watch","initLanguage","value","loadAnnouncement","mounted","methods","selectBallItems","loadNextPage","$ln","playBallType","items","arr","split","newArr","i","slice","component","_vm","_h","$createElement","_c","_self","staticClass","attrs","_v","_s","model","callback","$$v","$set","expression","on","$event","scopedSlots","_u","key","fn","ref","header","domProps","text","props","staticStyle","item","date","desc","_e","__file"],"mappings":"iHAAA,I,8RC6EA,I,EAgFA,EC7J6W,ED6E7W,CACEA,KAAM,eACNC,KAFF,WAGI,MAAO,CACLC,YAAa,CACXC,SAAU,GACVC,QAAS,IAGXC,WAAY,GAEZC,QAAS,CACf,CAAQ,KAAR,KAAQ,MAAR,SAAQ,UAAR,GACA,CAAQ,KAAR,KAAQ,MAAR,SAAQ,UAAR,EAAQ,QAAR,GACA,CAAQ,KAAR,KAAQ,MAAR,SAAQ,UAAR,IAEMC,iBAAkB,GAClBC,QAAS,CACPC,EAAG,KACHC,EAAG,KACHC,EAAG,KACHC,EAAG,KACHC,EAAG,KACHC,EAAG,KACHC,EAAG,KACHC,EAAG,KACHC,EAAG,KACHC,GAAI,KACJC,GAAI,KACJC,GAAI,KACJC,GAAI,KACJC,GAAI,KACJC,GAAI,MAENC,WAAY,CACVC,YAAa,EACbC,YAAa,GACbC,WAAY,GAGdC,eAAe,EACfC,SAAU,CACRC,OAAQ,EACRC,YAAa,GACbC,KAAM,GACNC,KAAM,GACNC,MAAO,MAIbC,S,sUAAU,CAAZ,GACA,aACI,qBAAJ,gCAFA,CAIIC,MAJJ,WAKM,OAAmC,MAA/BC,KAAKb,WAAWE,aAAqD,MAA9BW,KAAKb,WAAWG,WAA2B,EAC/EW,KAAKC,KAAKF,KAAKb,WAAWG,WAAaU,KAAKb,WAAWE,gBAGlEc,MAAO,CACL,oBADJ,SACA,GACMH,KAAKI,gBAGP,uBALJ,SAKA,GACMJ,KAAKR,SAASG,KAAOU,EACrBL,KAAKM,oBAEP,yBATJ,SASA,GAEMN,KAAKb,WAAWC,YAAc,EAC9BY,KAAKM,qBAGTC,QA1EF,WA2EIP,KAAKI,eAGLJ,KAAKM,oBAEPE,QAAS,CAGP,kB,EAHJ,qBAGA,KAHA,gFAIA,sBACA,GAEA,4BAIA,wBAEA,iDAEA,mDAfA,SAiBA,uBAjBA,OAiBA,EAjBA,OAkBA,kCAEA,qDACA,mDACA,6BACA,sBAvBA,kD,iLAAA,+CAyBIC,gBAzBJ,SAyBA,GAEMT,KAAKnC,YAAYC,SAAWuC,EAC5BL,KAAKR,SAASG,KAAOU,EACrBL,KAAKM,iBAAiB,EAAGN,KAAKb,WAAWE,cAG3CqB,aAhCJ,SAgCA,GAEMV,KAAKb,WAAWC,YAAcQ,EAC9BI,KAAKM,oBAGPF,aAtCJ,WAuCMJ,KAAKnC,YAAYE,QAAU,CACjC,CAAQ,KAAR,eAAQ,MAAR,IACA,CAAQ,KAAR,eAAQ,MAAR,IACA,CAAQ,KAAR,eAAQ,MAAR,GACA,CAAQ,KAAR,eAAQ,MAAR,GACA,CAAQ,KAAR,eAAQ,MAAR,GACA,CAAQ,KAAR,eAAQ,MAAR,GACA,CAAQ,KAAR,eAAQ,MAAR,GACA,CAAQ,KAAR,eAAQ,MAAR,GACA,CAAQ,KAAR,eAAQ,MAAR,GACA,CAAQ,KAAR,eAAQ,MAAR,GACA,CAAQ,KAAR,eAAQ,MAAR,GACA,CAAQ,KAAR,eAAQ,MAAR,IACA,CAAQ,KAAR,eAAQ,MAAR,IACA,CAAQ,KAAR,eAAQ,MAAR,IACA,CAAQ,KAAR,eAAQ,MAAR,IACA,CAAQ,KAAR,eAAQ,MAAR,KAEMiC,KAAKhC,WAAagC,KAAKW,IAAI,UAE7BC,aA3DJ,SA2DA,GACM,GAAIC,EAAO,CACT,IAAIC,EAAMD,EAAME,MAAM,KAClBC,EAAS,GACb,IAAK,IAAIC,KAAKH,EACZE,GAAUhB,KAAKW,IAAIX,KAAK7B,QAAQ2C,EAAIG,KAAO,IAG7C,OAAOD,EAAOE,MAAM,GAA5B,GASM,OAAOL,K,YElOTM,EAAY,YACd,GHRW,WAAa,IAAIC,EAAIpB,KAASqB,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,cAAc,CAACG,MAAM,CAAC,MAAQ,KAAK,CAACH,EAAG,WAAW,CAACG,MAAM,CAAC,KAAO,KAAK,CAACH,EAAG,SAAS,CAACG,MAAM,CAAC,IAAM,GAAG,IAAM,GAAG,IAAM,OAAO,CAACN,EAAIO,GAAGP,EAAIQ,GAAGR,EAAIT,IAAI,UAAUY,EAAG,SAAS,CAACG,MAAM,CAAC,IAAM,GAAG,IAAM,KAAK,CAACH,EAAG,WAAW,CAACE,YAAY,OAAOC,MAAM,CAAC,MAAQN,EAAIvD,YAAYE,SAAS8D,MAAM,CAACxB,MAAOe,EAAIvD,YAAoB,SAAEiE,SAAS,SAAUC,GAAMX,EAAIY,KAAKZ,EAAIvD,YAAa,WAAYkE,IAAME,WAAW,2BAA2B,IAAI,GAAIb,EAAiB,cAAEG,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,wBAAwB,GAAG,CAACA,EAAG,eAAe,CAACG,MAAM,CAAC,QAAUN,EAAInD,QAAQ,MAAQmD,EAAIlD,iBAAiB,WAAakD,EAAIjC,WAAW,eAAeiC,EAAIpD,WAAW,eAAe,IAAIkE,GAAG,CAAC,oBAAoB,SAASC,GAAQf,EAAIjC,WAAWgD,IAASC,YAAYhB,EAAIiB,GAAG,CAAC,CAACC,IAAI,aAAaC,GAAG,SAASC,GAC35B,IAAIC,EAASD,EAAIC,OACjB,MAAO,CAAClB,EAAG,OAAO,CAACE,YAAY,SAASiB,SAAS,CAAC,YAActB,EAAIQ,GAAGR,EAAIT,IAAI8B,EAAOE,aAAa,CAACL,IAAI,QAAQC,GAAG,SAASK,GAAO,MAAO,CAACrB,EAAG,KAAK,CAACsB,YAAY,CAAC,MAAQ,SAAS,CAACzB,EAAIO,GAAGP,EAAIQ,GAAGgB,EAAME,KAAKC,SAASxB,EAAG,KAAK,CAACE,YAAY,iBAAiBoB,YAAY,CAAC,MAAQ,UAAU,CAACzB,EAAIO,GAAGP,EAAIQ,GAAGR,EAAIR,aAAagC,EAAME,KAAKnD,UAAU4B,EAAG,KAAK,CAACE,YAAY,eAAeoB,YAAY,CAAC,aAAa,cAAc,CAACzB,EAAIO,GAAGP,EAAIQ,GAAGgB,EAAME,KAAKE,gBAAiB5B,EAAIrB,MAAQ,EAAGwB,EAAG,MAAM,CAACE,YAAY,uBAAuB,CAACF,EAAG,eAAe,CAACG,MAAM,CAAC,OAASN,EAAIrB,MAAM,MAAQ,wBAAwBmC,GAAG,CAAC,MAAQd,EAAIV,cAAcmB,MAAM,CAACxB,MAAOe,EAAIjC,WAAsB,YAAE2C,SAAS,SAAUC,GAAMX,EAAIY,KAAKZ,EAAIjC,WAAY,cAAe4C,IAAME,WAAW,6BAA6B,GAAGb,EAAI6B,OAAO,IAAI,KACnwB,IGQpB,EACA,KACA,KACA,MAIF9B,EAAUpD,QAAQmF,OAAS,YACZ,aAAA/B,E","file":"js/chunk-2d229295.0af594e2.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"announcement\"},[_c('v-container',{attrs:{\"fluid\":\"\"}},[_c('v-layout',{attrs:{\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"sm9\":\"\",\"xs6\":\"\",\"tag\":\"h3\"}},[_vm._v(_vm._s(_vm.$ln('公告')))]),_c('v-flex',{attrs:{\"sm3\":\"\",\"xs6\":\"\"}},[_c('v-select',{staticClass:\"mt-0\",attrs:{\"items\":_vm.selectItems.options},model:{value:(_vm.selectItems.selected),callback:function ($$v) {_vm.$set(_vm.selectItems, \"selected\", $$v)},expression:\"selectItems.selected\"}})],1)],1),(_vm.loadingStatus)?_c('div',{staticClass:\"text-xs-center\"},[_c('MaterialLoadingPage')],1):[_c('v-data-table',{attrs:{\"headers\":_vm.headers,\"items\":_vm.announcementList,\"pagination\":_vm.pagination,\"no-data-text\":_vm.showNoData,\"hide-actions\":\"\"},on:{\"update:pagination\":function($event){_vm.pagination=$event}},scopedSlots:_vm._u([{key:\"headerCell\",fn:function(ref){\nvar header = ref.header;\nreturn [_c('span',{staticClass:\"column\",domProps:{\"textContent\":_vm._s(_vm.$ln(header.text))}})]}},{key:\"items\",fn:function(props){return [_c('td',{staticStyle:{\"width\":\"80px\"}},[_vm._v(_vm._s(props.item.date))]),_c('td',{staticClass:\"text-xs-center\",staticStyle:{\"width\":\"100px\"}},[_vm._v(_vm._s(_vm.playBallType(props.item.ball)))]),_c('td',{staticClass:\"text-xs-left\",staticStyle:{\"word-break\":\"break-all\"}},[_vm._v(_vm._s(props.item.desc))])]}}])}),(_vm.pages > 0)?_c('div',{staticClass:\"text-xs-center pt-2\"},[_c('v-pagination',{attrs:{\"length\":_vm.pages,\"color\":\"deep-orange darken-1\"},on:{\"input\":_vm.loadNextPage},model:{value:(_vm.pagination.currentPage),callback:function ($$v) {_vm.$set(_vm.pagination, \"currentPage\", $$v)},expression:\"pagination.currentPage\"}})],1):_vm._e()]],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"announcement\">\r\n    <v-container fluid>\r\n      <v-layout wrap>\r\n        <v-flex\r\n          sm9\r\n          xs6\r\n          tag=\"h3\">{{ $ln('公告') }}</v-flex>\r\n        <v-flex sm3 xs6>\r\n          <v-select\r\n            class=\"mt-0\"\r\n            v-model=\"selectItems.selected\"\r\n            :items=\"selectItems.options\"\r\n          />\r\n          <!-- <v-btn\r\n        v-for=\"(item, key) in selectItems.options\"\r\n        :key=\"key\"\r\n        small\r\n        :color=\"item.value === selectItems.selected ? 'success' : 'gray-3'\"\r\n        class=\"mb-2 mx-1 colorItem\"\r\n        @click=\"selectBallItems(item.value)\"\r\n      >\r\n        {{ item.text }}\r\n          </v-btn> -->\r\n        </v-flex>\r\n\r\n      </v-layout>\r\n        <!-- 載入中 -->\r\n      <div\r\n        v-if=\"loadingStatus\"\r\n        class=\"text-xs-center\">\r\n        <MaterialLoadingPage/>\r\n      </div>\r\n      <template v-else>\r\n        <v-data-table\r\n          :headers=\"headers\"\r\n          :items=\"announcementList\"\r\n          :pagination.sync=\"pagination\"\r\n          :no-data-text=\"showNoData\"\r\n          hide-actions>\r\n          <template\r\n            slot=\"headerCell\"\r\n            slot-scope=\"{ header }\">\r\n            <span class=\"column\" v-text=\"$ln(header.text)\"/>\r\n            <!-- <div v-if=\"header.select\">\r\n              <v-select\r\n                v-model=\"selectItems.selected\"\r\n                :items=\"selectItems.options\"\r\n              />\r\n            </div> -->\r\n          </template>\r\n          <template\r\n            slot=\"items\"\r\n            slot-scope=\"props\">\r\n            <td style=\"width:80px;\">{{ props.item.date }}</td>\r\n            <td class=\"text-xs-center\" style=\"width:100px;\">{{ playBallType(props.item.ball) }}</td>\r\n            <td style=\"word-break: break-all\" class=\"text-xs-left\">{{ props.item.desc }}</td>\r\n          </template>\r\n        </v-data-table>\r\n\r\n        <div\r\n          v-if=\"pages > 0\"\r\n          class=\"text-xs-center pt-2\">\r\n          <v-pagination\r\n            v-model=\"pagination.currentPage\"\r\n            :length=\"pages\"\r\n            color=\"deep-orange darken-1\"\r\n            @input=\"loadNextPage\"/>\r\n        </div>\r\n      </template>\r\n    </v-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapActions } from 'vuex'\r\nimport _miscellaneous from \"@/utils/api/miscellaneous\"\r\nexport default {\r\n  name: 'Announcement',\r\n  data () {\r\n    return {\r\n      selectItems: {\r\n        selected: '',\r\n        options: [] // *initLanguage*\r\n        // ['全部', '系統', '美棒', '日棒', '台棒', '韓棒', '冰球', '籃球', '彩球', '美足', '足球', '指數', '賽馬', '電競', '其他', '世足']\r\n      },\r\n      showNoData: '', // *initLanguage*\r\n      //showNoData: '目前無資料'\r\n      headers: [\r\n        { text: '時間', align: 'center', sortable: false },\r\n        { text: '類別', align: 'center', sortable: false, select: true },\r\n        { text: '內容', align: 'center', sortable: false }\r\n      ],\r\n      announcementList: [],\r\n      mapType: {\r\n        1: '美棒',\r\n        2: '日棒',\r\n        3: '台棒',\r\n        4: '韓棒',\r\n        5: '冰球',\r\n        6: '籃球',\r\n        7: '彩球',\r\n        8: '美足',\r\n        9: '網球',\r\n        10: '足球',\r\n        11: '指數',\r\n        12: '賽馬',\r\n        13: '電競',\r\n        14: '其他',\r\n        15: '系統'\r\n      },\r\n      pagination: {\r\n        currentPage: 1, // 當前頁數\r\n        rowsPerPage: 10, // 每頁筆數\r\n        totalItems: 0 // 總筆數\r\n      },\r\n      // 頁面載入狀態\r\n      loadingStatus: false,\r\n      gamelist: {\r\n        locate: 1,\r\n        site_number: '',\r\n        ball: '',\r\n        page: '',\r\n        count: ''\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters({\r\n      getAnnouncementState: 'sports/getAnnouncementState'\r\n    }),\r\n    pages () {\r\n      if (this.pagination.rowsPerPage == null || this.pagination.totalItems == null) return 0\r\n      return Math.ceil(this.pagination.totalItems / this.pagination.rowsPerPage)\r\n    }\r\n  },\r\n  watch: {\r\n    '$store.state.lang' (value) {\r\n      this.initLanguage()\r\n    },\r\n\r\n    'selectItems.selected' (value) {\r\n      this.gamelist.ball = value\r\n      this.loadAnnouncement()\r\n    },\r\n    'pagination.rowsPerPage' (rowsPerPage) {\r\n      // 回第一頁\r\n      this.pagination.currentPage = 1\r\n      this.loadAnnouncement()\r\n    }\r\n  },\r\n  mounted () {\r\n    this.initLanguage()\r\n\r\n    // 載入狀態(開始)\r\n    this.loadAnnouncement()\r\n  },\r\n  methods: {\r\n\r\n    // 載入公告\r\n    async loadAnnouncement (page, rowsPerPage) {\r\n      this.loadingStatus = true\r\n      let params = {\r\n        // 功能(必填)\r\n        locate: this.gamelist.locate,\r\n        // site_number: this.gamelist.site_number,\r\n        // account_level: this.gamelist.account_level,\r\n        // 類別(必填，可為空值)\r\n        ball: this.gamelist.ball,\r\n        // 頁數(必填)\r\n        page: page !== undefined ? page : this.pagination.currentPage,\r\n        // 筆數(必填)\r\n        count: rowsPerPage !== undefined ? rowsPerPage : this.pagination.rowsPerPage\r\n      }\r\n      let res = await _miscellaneous.getAnnouncement(params)\r\n      this.announcementList = res.data_list\r\n      // 若 API 有當前頁數回傳資料，可設定如下\r\n      this.pagination.currentPage = parseInt(res.current_page)\r\n      this.pagination.totalItems = parseInt(res.total_count)\r\n      this.headers.contents = res.list\r\n      this.loadingStatus = false\r\n    },\r\n    selectBallItems (value) {\r\n      console.log(value)\r\n      this.selectItems.selected = value\r\n      this.gamelist.ball = value\r\n      this.loadAnnouncement(1, this.pagination.rowsPerPage)\r\n    },\r\n    // 載入下一頁\r\n    loadNextPage (page) {\r\n      // 若 API 有當前頁數回傳資料，可註解以下\r\n      this.pagination.currentPage = page\r\n      this.loadAnnouncement()\r\n    },\r\n    // 初始語系\r\n    initLanguage () {\r\n      this.selectItems.options = [\r\n        { text: this.$ln('全部'), value: '' },\r\n        { text: this.$ln('系統'), value: 15 },\r\n        { text: this.$ln('美棒'), value: 1 },\r\n        { text: this.$ln('日棒'), value: 2 },\r\n        { text: this.$ln('台棒'), value: 3 },\r\n        { text: this.$ln('韓棒'), value: 4 },\r\n        { text: this.$ln('冰球'), value: 5 },\r\n        { text: this.$ln('籃球'), value: 6 },\r\n        { text: this.$ln('彩球'), value: 7 },\r\n        { text: this.$ln('美足'), value: 8 },\r\n        { text: this.$ln('網球'), value: 9 },\r\n        { text: this.$ln('足球'), value: 10 },\r\n        { text: this.$ln('指數'), value: 11 },\r\n        { text: this.$ln('賽馬'), value: 12 },\r\n        { text: this.$ln('電競'), value: 13 },\r\n        { text: this.$ln('其他'), value: 14 }\r\n      ]\r\n      this.showNoData = this.$ln('目前無資料')\r\n    },\r\n    playBallType(items){\r\n      if (items) {\r\n        var arr = items.split(',')\r\n        var newArr = ''\r\n        for (var i in arr) {\r\n          newArr += this.$ln(this.mapType[arr[i]]) + '、'\r\n        }\r\n        // console.log(newArr.join(','), '>>>>')\r\n        return newArr.slice(0,-1)\r\n\r\n        // var newArr = []\r\n        // for (var i in arr) {\r\n        //   newArr.push(this.$ln(this.mapType[arr[i]]))\r\n        // }\r\n        // console.log(newArr.join(','), '>>>>')\r\n        // return newArr.join('\b,')\r\n      }\r\n      return items\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=aca1278c&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"index.vue\"\nexport default component.exports"],"sourceRoot":""}